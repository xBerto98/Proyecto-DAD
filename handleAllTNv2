	private void handleAllTNv2(RoutingContext routingContext) {
		mySQLClient.getConnection(connection -> {
			if(connection.succeeded()) {
				LocalDateTime ldt = LocalDateTime.now();
				String fin = transfFecha(ldt);
				String ini = formatFecha(ldt);
				connection.result().query("SELECT idUsuarioTN, cont, acierto FROM dad.tecladosnumericos "
						+ "WHERE tempTN <= '" + ini + "' AND tempTN >= '" + fin + "';", result -> {
					if(result.succeeded()) {
						String jsonResult=result.result().toJson().encodePrettily();
						ResultSet rs = result.result();
						for (int i = 0; i < rs.getNumRows(); i++) {
							int user = rs.getResults().get(i).getInteger(0);
							int cont = rs.getResults().get(i).getInteger(1);
							int acierto = rs.getResults().get(i).getInteger(2);
							if(cont==3 && acierto==0) {
								System.out.println("Usted usuario " + user + " no puede entrar en el keli hasta dentro de un rato");
							}
						}
						routingContext.response().end(jsonResult);
					} else {
						System.out.println(result.cause().getMessage());
						routingContext.response().setStatusCode(400).end();
					}
					connection.result().close();
				});
			} else {
				routingContext.response().end();
				connection.result().close();
				System.out.println(connection.cause().getMessage());
				routingContext.response().setStatusCode(400).end();
			}
		});
	}

	private String transfFecha(LocalDateTime ldt) {
		String res;
		ldt = ldt.minusMinutes(5);
		res = ldt.toString("yyyy-MM-dd HH:mm:ss");
		return res;
	}
	
	private String formatFecha(LocalDateTime ldt) {
		String res = ldt.toString();
		res = ldt.toString("yyyy-MM-dd HH:mm:ss");
		return res;
	}
